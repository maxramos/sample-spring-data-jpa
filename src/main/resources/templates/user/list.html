<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
	<title>User List</title>
	<meta charset="utf-8" />
</head>
<body>
	<div th:replace="commons/action :: logout"></div>
	<h1>User List</h1>
	<nav th:replace="commons/navigation :: ${session.loggedInUser.role}"></nav>
	<div th:replace="commons/display :: fullName"></div>
	<br />
	<div>
		<table border="1">
			<tr>
				<th></th>
				<th>Username</th>
				<th>Role</th>
				<th>Email</th>
				<th>Full Name</th>
				<th>Age</th>
				<th>Birthday</th>
				<th>Gender</th>
				<th>Address</th>
				<th>Supervisor</th>
				<th>Department</th>
				<th>Enabled</th>
				<th>Action</th>
			</tr>
			<tr th:each="user,status : ${users}">
				<td th:text="${status.count}">count</td>
				<td th:text="${user.username}">username</td>
				<td th:text="${user.role}">role</td>
				<td th:text="${user.email}">email</td>
				<td th:text="${user.fullName}">full name</td>
				<td th:text="${user.age}">age</td>
				<td th:text="${user.birthday}">birthday</td>
				<td th:text="${{user.gender}}">gender</td>
				<td>
					<p>
						[(${user.address.formattedAddress})]
					</p>
				</td>
				<td th:text="${user.supervisor?.fullName}">supervisor</td>
				<td th:text="${user.department?.name}">department</td>
				<td>
					<form th:if="${not user.enabled}" th:action="@{/admin/user/enable(id=${user.id})}" method="post">
						<input type="submit" value="Enable" />
					</form>
					<form th:if="${user.enabled}" th:action="@{/admin/user/disable(id=${user.id})}" method="post">
						<input type="submit" value="Disable" />
					</form>
				</td>
				<td>
					<form th:action="@{/admin/user/delete(id=${user.id})}" method="post">
						<input type="submit" value="Delete" th:disabled="${user.role} == admin" />
					</form>
				</td>
			</tr>
		</table>
	</div>
</body>
</html>